<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>TESjs - Streamlining Twitch EventSub</title>
        <meta name="description" content="A module to streamline the use of Twitch EventSub in Node.js applications" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="./tes_styles.css" />
        <link
            rel="preload"
            as="style"
            href="https://cdn.jsdelivr.net/npm/@mdi/font@5.8.55/css/materialdesignicons.min.css"
            onload="this.onload=null;this.rel='stylesheet'"
        />
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet" />

        <link rel="canonical" href="https://www.tesjs.com" />
        <link rel="canonical" href="https://tesjs.com" />

        <style>
            .hljs {
                display: block;
                overflow-x: auto;
                padding: 0.5em;
                background: #353341;
                -moz-tab-size: 4;
                tab-size: 4;
            }

            .hljs-comment,
            .hljs-quote {
                color: #738290;
                font-style: italic;
            }

            .hljs-keyword {
                color: #855cad;
            }

            .hljs-built_in {
                color: #ffad99;
            }

            .hljs-string {
                color: #85eaa7;
            }

            .hljs-attr {
                color: #a68c98;
            }
            .hljs-subst {
                color: #4e74bc; /*#6C61D1;*/
            }
        </style>
    </head>
    <body>
        <header>
            <div class="header-container">
                <a href="#" style="height: 1.5rem"><img src="./assets/tesjs.svg" alt="TESjs" style="height: 100%" /></a>
                <span id="header-version-number" style="margin: 0.25rem 0 0 0.25rem; font-size: 0.75rem"></span>
                <div class="button-row" style="margin: 0 1rem 0 auto">
                    <a
                        href="https://www.npmjs.com/package/tesjs"
                        class="button-icon mdi mdi-npm"
                        target="_blank"
                        rel="noopener noreferrer"
                        title="TESjs on npm"
                    ></a>
                    <a
                        href="https://github.com/mitchwadair/tesjs"
                        class="button-icon mdi mdi-github"
                        target="_blank"
                        rel="noopener noreferrer"
                        title="TESjs on GitHub"
                    ></a>
                </div>
            </div>
        </header>
        <div class="tes-body">
            <div class="tes-content">
                <div class="tes-content-heading">
                    <div class="tes-content-logo">
                        <img src="./assets/tesjs.svg" alt="TESjs" style="width: 100%" />
                    </div>
                    <div class="tes-content-heading-blurb">
                        <h1>Streamline your Twitch EventSub integration with TESjs</h1>
                        <p>
                            Whether you prefer Webhooks or WebSockets as your transport method, TESjs has you covered.
                            TESjs is the ideal solution for developers who want to save time and effort when integrating
                            Twitch's EventSub system into their app.
                        </p>
                        <div
                            style="
                                display: flex;
                                flex-direction: row;
                                align-items: center;
                                justify-content: center;
                                margin-top: 1rem;
                            "
                        >
                            <div class="button-row">
                                <a
                                    href="https://www.npmjs.com/package/tesjs"
                                    class="button-link mdi mdi-npm"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    title="TESjs on npm"
                                >
                                    <span>NPM</span>
                                </a>
                                <a
                                    href="https://github.com/mitchwadair/tesjs"
                                    class="button-link mdi mdi-github"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    title="TESjs on GitHub"
                                >
                                    <span>GitHub</span>
                                </a>
                            </div>
                        </div>
                        <div
                            style="
                                display: flex;
                                flex-direction: row;
                                justify-content: center;
                                align-items: center;
                                margin-top: 1rem;
                            "
                        >
                            <span style="font-weight: lighter; font-size: 1.5rem">Current Version:</span>
                            <span
                                id="version-number"
                                style="font-weight: lighter; font-size: 1.5rem; margin-left: 0.5rem"
                            ></span>
                        </div>
                    </div>
                </div>
                <div class="announcement">
                    <div class="mdi mdi-alert-circle-outline alert-icon"></div>
                    <div class="title">WebSockets are here!</div>
                    <p>
                        With WebSocket transport now available, TESjs also supports WebSocket transport. To give it a
                        try, you can install any version <i>v1.0.0</i> or later
                    </p>
                    <p>
                        Be sure to check out the
                        <a href="https://github.com/mitchwadair/tesjs/tree/main/doc" class="link-dark"
                            >updated documentation</a
                        >
                        on how to use WebSockets with TESjs!
                    </p>
                </div>
                <div class="tes-blurb" style="border-top: 1px solid var(--bg-primary)">
                    <div class="tes-tile">
                        <h2>Skip the Hard Stuff</h2>
                        <p>
                            Twitch's EventSub system is an essential component of building real-time applications that
                            engage with Twitch users. However, the process of setting up and managing EventSub can be
                            time-consuming and frustrating. TESjs takes the hassle out of EventSub integration, allowing
                            you to focus on building the features that matter.
                        </p>
                    </div>
                    <div class="tes-tile">
                        <h2>Integrate Seamlessly</h2>
                        <p>
                            Already running an Express server in your app? TESjs has you covered! TESjs seamlessly
                            integrates with your existing Express application, enabling you to quickly add EventSub
                            functionality without any additional setup. Just pass your Express ap into the TESjs config
                            and you're already done.
                        </p>
                    </div>
                </div>
                <div class="tes-blurb">
                    <div class="tes-tile" style="max-width: unset">
                        <h2 style="font-weight: lighter; font-size: 1.75rem">Documentation</h2>
                        <p>
                            TESjs documentation provides detailed information on how to integrate EventSub into your app
                            using our library. For in-depth details and examples on using TESjs, check out the
                            <a
                                href="https://github.com/mitchwadair/tesjs/tree/main/doc"
                                target="_blank"
                                rel="noopener noreferrer"
                                title="TESjs on GitHub"
                                >documentation</a
                            >
                            on GitHub. There you can learn about all of the features available to you in TESjs and get
                            direct references to supplemental documentation from Twitch.
                        </p>
                    </div>
                </div>
                <div class="tes-examples">
                    <section style="margin-bottom: 1rem">
                        <span id="install"></span>
                        <a href="#install" class="tes-anchor">
                            <h1>Install</h1>
                        </a>
                        <p>Download TESjs now and take your Twitch EventSub integration to the next level!</p>
                        <pre><code class='sh tes-code'>npm install tesjs</code></pre>
                        <p>or, in-browser</p>
                        <pre><code class='html tes-code'>&lt;script src="https://cdn.jsdelivr.net/gh/mitchwadair/tesjs@v1.0.0/dist/tes.min.js"&gt;&lt;/script&gt;</code></pre>
                    </section>
                    <section>
                        <span id="init-tes"></span>
                        <a href="#init-tes" class="tes-anchor">
                            <h2>Initialise the TES Instance</h2>
                        </a>
                        <h3>Node</h3>
                        <pre>
                            <code class='js tes-code'>
const TES = require('tesjs');

// initialize TESjs
const tes = new TES({
    identity: {
        id: YOUR_CLIENT_ID,
        secret: YOUR_CLIENT_SECRET // do not ship this in plaintext!! use environment variables so this does not get exposed
    },
    listener: {
        type: "webhook",
        baseURL: "https://example.com", // this MUST be an HTTPS endpoint on port 443
        secret: WEBHOOKS_SECRET // this should be different from your client secret and should also be using an environment variable
    }
});
                            </code>
                        </pre>
                        <h3>Web Browser</h3>
                        <pre>
                            <code class='html tes-code'>
&lt;script&gt;
// TES is available globally as `TES` when importing from CDN in-browser
// initialize TESjs
const tes = new TES({
    identity: {
        id: YOUR_CLIENT_ID,
        authToken: YOUR_USER_ACCESS_TOKEN,
    },
    listener: {
        type: "websocket",
    }
});
&lt;/script&gt;
                            </code>
                        </pre>
                    </section>
                    <section>
                        <span id="create-event-listener"></span>
                        <a href="#create-event-listener" class="tes-anchor">
                            <h2>Create an Event Listener</h2>
                        </a>
                        <pre>
                            <code class='js tes-code'>
// define an event handler for the 'channel.update' event
// NOTES: 
//   this handles ALL events of that type
//   events will not be fired until there is a subscription made for them
tes.on('channel.update', event => {
    console.log(`${event.broadcaster_user_name}'s new title is ${event.title}`);
});
                            </code>
                        </pre>
                    </section>
                    <section>
                        <span id="subscribe-to-event"></span>
                        <a href="#subscribe-to-event" class="tes-anchor">
                            <h2>Subscribe to an Event</h2>
                        </a>
                        <pre>
                            <code class='js tes-code'>
// create a new subscription for the 'channel.update' event for broadcaster '1337'
tes.subscribe('channel.update', {
    broadcaster_user_id: '1337'
}).then(() => {
    console.log('Subscription successful');
}).catch(err => {
    console.log(err);
});
                            </code>
                        </pre>
                    </section>
                    <section>
                        <span id="revocation-clean-up"></span>
                        <a href="#revocation-clean-up" class="tes-anchor">
                            <h2>Clean Up Revoked Subscriptions</h2>
                        </a>
                        <pre>
                            <code class='js tes-code'>
// the 'revocation' event will be fired if an subscription gets revoked by Twitch
// if there is any necessary cleanup for your app, use this event to do it
tes.on('revocation', subscriptionData => {
    console.log(`subscription with id ${subscriptionData.id} has been revoked`);
    // perform necessary cleanup here
});
                            </code>
                        </pre>
                    </section>
                    <section>
                        <span id="external-auth-handling"></span>
                        <a href="#external-auth-handling" class="tes-anchor">
                            <h2>Use External Authentication Handling</h2>
                        </a>
                        <pre>
                            <code class='js tes-code'>
const TES = require('tesjs');

// example app access token fetching
const customTokenRefresh = async () => {
    // ... token fetching business logic ...
    return yourFetchedToken;
}

// initialize TESjs
// if you are using TESjs in conjunction with other Twitch-related libraries or API usage,
// you can use the `identity.onAuthenticationFailure` configuration option to handle your
// fetching/refreshing your app access token yourself
const tes = new TES({
    identity: {
        id: YOUR_CLIENT_ID,
        secret: YOUR_CLIENT_SECRET, // do not ship this in plaintext!! use environment variables so this does not get exposed
        onAuthenticationFailure: customTokenRefresh,
        accessToken: EXISTING_ACCESS_TOKEN, // if you already have an app access token, put it here to avoid an unnecessary token refresh
    },
    listener: {
        type: "webhook",
        baseURL: "https://example.com", // this MUST be an HTTPS endpoint on port 443
        secret: WEBHOOKS_SECRET // this should be different from your client secret and should also be using an environment variable
    }
});
                            </code>
                        </pre>
                    </section>
                </div>
                <div style="margin: 1rem; padding: 0 1rem 2rem 2rem; border-top: 1px solid var(--bg-primary)">
                    <h2 style="font-weight: lighter; font-size: 1.75rem">Support the Project</h2>
                    <p>
                        If you would like to support the development and maintenance of TESjs, please consider
                        supporting the project through
                        <a
                            href="https://github.com/sponsors/mitchwadair"
                            target="_blank"
                            rel="noopener noreferrer"
                            title="GitHub Sponsors"
                            >GitHub Sponsors</a
                        >
                        or through a one-time
                        <a
                            href="https://paypal.me/mitchwadair"
                            target="_blank"
                            rel="noopener noreferrer"
                            title="PayPal Donation"
                            >PayPal donation</a
                        >
                        . Donations are not required but are much appreciated and will directly support efforts to
                        continue developing TESjs.
                    </p>
                    <a
                        href="https://paypal.me/mitchwadair"
                        target="_blank"
                        rel="noopener noreferrer"
                        title="PayPal Donation"
                        style="text-decoration: none"
                    >
                        <img
                            src="https://www.paypalobjects.com/digitalassets/c/website/marketing/na/us/logo-center/Badge_1.png"
                            alt="PayPal Logo"
                            class="tes-support-img"
                        />
                    </a>
                    <a
                        href="https://github.com/sponsors/mitchwadair"
                        target="_blank"
                        rel="noopener noreferrer"
                        title="GitHub Sponsors"
                        style="text-decoration: none"
                    >
                        <img
                            src="https://github.githubassets.com/images/modules/site/sponsors/logo-mona-2.svg"
                            alt="GitHub Sponsors Logo"
                            class="tes-support-img"
                        />
                    </a>
                </div>
            </div>
            <footer>
                <div class="footer-container">
                    <span class="mdi mdi-copyright" style="padding-right: 0.25rem"></span>
                    <a
                        href="https://github.com/mitchwadair"
                        class="footer-link"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Mitchell Adair</a
                    >
                    <span id="footer-year" style="padding-left: 0.25rem">2021</span>
                </div>
            </footer>
        </div>
        <script src="https://unpkg.com/@highlightjs/cdn-assets@10.4.0/highlight.min.js"></script>
        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <script>
            document.getElementById("footer-year").innerHTML = `2020 - ${new Date().getFullYear()}`;

            fetch("https://api.github.com/repos/mitchwadair/tesjs/tags", {
                method: "GET",
                headers: { "Content-Type": "application/json" },
            })
                .then((res) => res.json())
                .then((res) => {
                    let tag;
                    for ({ name } of res) {
                        if (!name.includes("beta")) {
                            tag = name;
                            break;
                        }
                    }
                    document.getElementById("version-number").innerText = tag;
                    document.getElementById("header-version-number").innerText = tag;
                });
        </script>
    </body>
</html>
